
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://helbling-technik.github.io/HelMoRo/software_ros1/05_software_architecture/">
      
      
        <link rel="prev" href="../04_installation_guide/">
      
      
        <link rel="next" href="../06_algorithms/">
      
      
      <link rel="icon" href="../../assets/logos/Helbling_Favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Software Architecture - HelMoRo</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sora:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Sora";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-TQFVDBEGQT"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-TQFVDBEGQT",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-TQFVDBEGQT",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#architectural-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="HelMoRo" class="md-header__button md-logo" aria-label="HelMoRo" data-md-component="logo">
      
  <img src="../../assets/logos/Helbling_Logo_weiss.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HelMoRo
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Software Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../description/" class="md-tabs__link">
        
  
    
  
  Description

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../hardware/bill_of_materials/" class="md-tabs__link">
          
  
  Hardware

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software_ros2/installation/" class="md-tabs__link">
          
  
  Software (ROS 2)

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../02_quick_start_guide/" class="md-tabs__link">
          
  
  Software (ROS 1)

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../collaboration/" class="md-tabs__link">
        
  
    
  
  Collaboration

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../about/about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="HelMoRo" class="md-nav__button md-logo" aria-label="HelMoRo" data-md-component="logo">
      
  <img src="../../assets/logos/Helbling_Logo_weiss.png" alt="logo">

    </a>
    HelMoRo
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../description/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Description
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hardware
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Hardware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/bill_of_materials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bill of Materials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/cad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/electronic_system_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Electronic System Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/assembly_instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assembly Instructions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software (ROS 2)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Software (ROS 2)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_ros2/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_ros2/usage_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_ros2/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_ros2/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Software (ROS 1)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Software (ROS 1)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_quick_start_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_detailed_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Detailed Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_installation_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Software Architecture
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../collaboration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collaboration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="architectural-overview">Architectural Overview<a class="headerlink" href="#architectural-overview" title="Permanent link">&para;</a></h1>
<p>The following flowchart shows an overview of the ROS architecture of Helmoro including internal and external packages when the parameter <code>is_real_robot</code> is set to true and gazebo is not running. The internal packages will be briefly explained in section <a href="#packages">Packages</a>. External Packages will be explained in section <a href="#dependencies">Dependencies</a>. Additionally, packages used for <a href="#slam-using-gmapping">SLAM</a> (gmapping), <a href="#autonomous-navigation-using-the-navigation-stack">Autonomous Navigation</a> (Nav Stack) and <a href="#autonomous-slam-using-explore_lite">Autonomous SLAM</a> (explore_lite) are further explained in their respective sections.</p>
<p><img alt="ros_architecture_realrobot" src="../pictures/ros_architecture_realrobot.png" /></p>
<h1 id="packages">Packages<a class="headerlink" href="#packages" title="Permanent link">&para;</a></h1>
<p>In the following, each package of the Helmoro ROS architecture is explained shortly.</p>
<h2 id="helmoro_description">helmoro_description<a class="headerlink" href="#helmoro_description" title="Permanent link">&para;</a></h2>
<h3 id="launch-files">launch files<a class="headerlink" href="#launch-files" title="Permanent link">&para;</a></h3>
<ul>
<li>helmoro.launch: Main launch file, that starts all the required nodes for Helmoro.</li>
<li>gmapping_helmoro.launch: Launch file for gmapping (for customizable parameters).</li>
</ul>
<h3 id="param">param<a class="headerlink" href="#param" title="Permanent link">&para;</a></h3>
<ul>
<li>default.yaml stores Helmoro's hardware specs and is used by many different nodes.</li>
</ul>
<h3 id="urdf-and-meshes">urdf and meshes<a class="headerlink" href="#urdf-and-meshes" title="Permanent link">&para;</a></h3>
<ul>
<li>Meshes and .urdf files are used for the physical description of Helmoro. They define orientation and position of the different hardware components to each other. This is used to build a robot model, that can be visualized in rviz, for tf information of the different frames that are published to <code>/tf</code> using helmoro_state_publisher and for the specification of the sensor streams that should be simulated in gazebo.</li>
</ul>
<h3 id="rviz">rviz<a class="headerlink" href="#rviz" title="Permanent link">&para;</a></h3>
<ul>
<li>rviz_config.rviz: rviz config file, that describes the default rviz settings for Helmoro.</li>
</ul>
<!-- ## helmoro_msgs -->

<p>Package where all the required custom messages and services for Helmoro are described.</p>
<h2 id="helmoro_joymanager">helmoro_joymanager<a class="headerlink" href="#helmoro_joymanager" title="Permanent link">&para;</a></h2>
<h3 id="launch-files_1">launch files<a class="headerlink" href="#launch-files_1" title="Permanent link">&para;</a></h3>
<ul>
<li>joymanager.launch: Calls the two nodes joy_node (remapped as helmoro_joystick) and helmoro_joymanager and loads the parameters described in parameters.yaml</li>
</ul>
<h3 id="nodes">nodes<a class="headerlink" href="#nodes" title="Permanent link">&para;</a></h3>
<ul>
<li>joy_node: interprets the joystick commands coming from the Logitech Wireless joystick F710 controller and publishes them over a message of type <a href="http://docs.ros.org/melodic/api/sensor_msgs/html/msg/Joy.html">sensor_msgs/Joy</a> to the topic <code>/helmoro_joystick</code></li>
<li>helmoro_joymanager_node: Subscribes to the <code>/helmoro_joystick</code> topic, scales the joystick commands and publishes a message of type <a href="https://docs.ros.org/api/geometry_msgs/html/msg/Twist.html">geometry_msgs/Twist</a> on the topic <code>/cmd_vel</code> describing the desired linear and angular movement of the Helmoro.</li>
</ul>
<h2 id="helmoro_motor_commands">helmoro_motor_commands<a class="headerlink" href="#helmoro_motor_commands" title="Permanent link">&para;</a></h2>
<p>The helmoro_motor_commands package is only used if <code>is_real_robot</code> is set to true and used for sending desired speed commands to the motor controllers and reading out the angular speeds and position coming from the encoders. Information on the setup of the RoboClaw Motor Controllers can be found here:</p>
<p><center></p>
<p><img alt="Wiring Options" src="../pictures/wiringOption1.png" /></p>
<p></center></p>
<table>
<thead>
<tr>
<th style="text-align: left;"></th>
<th style="text-align: left;">Option 1</th>
<th style="text-align: left;">Option 2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Wiring</td>
<td style="text-align: left;">- Wire one of the two RoboClaws to the Jetson Nano SBC via Micro-USB to Micro-USB cable <br>- Wire the second RoboClaw to the first with UART. Don’t forget to connect the Ground and to Switch RX and TX. <br>- RoboClaw: RX on S1 pin, TX on S2 pin</td>
<td style="text-align: left;">- Wire both RoboClaws to the Jetson Nano SBC via Micro-USB to Micro-USB cable</td>
</tr>
<tr>
<td style="text-align: left;">Setting</td>
<td style="text-align: left;">- Connect one RoboClaw to PC via USB and open it with the <a href="https://www.basicmicro.com/downloads">downloaded BasicmicroMotionStudio</a> <br>- Set first RoboClaw to USB-TTL Relay Mode in the General Settings <br>- Leave second RoboClaw as it is. No Multi-Unit Mode! <br>- Set a unique address for each RoboClaws in the General Settings in order for them not to conflict with each other <br>- Set Baudrate you would like to use in the General Settings <br>- <a href="https://resources.basicmicro.com/auto-tuning-with-motion-studio">Configure the PID values</a> of the RoboClaws if not yet done. <br>- Don’t forget to Device $\rightarrow$ Write Settings in the top left corner before disconnecting your RoboClaw.</td>
<td style="text-align: left;">- Connect one RoboClaw to PC via USB and open it with the <a href="https://www.basicmicro.com/downloads">downloaded BasicmicroMotionStudio</a> <br>- Don’t set any of the two RoboClaws to USB-TTL Relay Mode <br>- Set an address for each RoboClaw in the General Settings. Note for this wiring, the addresses can be equal since ports are different (/dev/ttyACM0 and /dev/ttyACM1 in Linux) <br>- Set Baudrate you would like to use in the General Settings <br>- <a href="https://resources.basicmicro.com/auto-tuning-with-motion-studio">Configure the PID values</a>] of the RoboClaws if not yet done. <br>- Don’t forget to Device $\rightarrow$ Write Settings in the top left corner before disconnecting your RoboClaw</td>
</tr>
</tbody>
</table>
<h3 id="nodes_1">nodes<a class="headerlink" href="#nodes_1" title="Permanent link">&para;</a></h3>
<ul>
<li>helmoro_motor_commands: Subscribes to <code>/cmd_vel</code> and <code>/imu/data</code> and computes the desired wheel speed using a straight forward computation and an integral term that sums up the error between the desired and actual (imu measured) angular speed of Helmoro's base. It sends the computed speeds to the two motor controllers and in turn reads the wheel speeds and positions and publishes them as a custom message on <code>/helmoro_joint_states</code>. Messages are sent and read from the motor controllers using the functions defined under motor_interface. They actually imitate the functions from the <a href="https://resources.basicmicro.com/using-the-roboclaw-python-library/">RoboClaw Python Library</a> for C++ usage. (see <code>motor_command_types.h</code> for the according command numbers and compare them to the numbers used in the python library or in <code>helmoro_roboclaw</code>).</li>
</ul>
<h3 id="comments">comments<a class="headerlink" href="#comments" title="Permanent link">&para;</a></h3>
<ul>
<li>In order for commands to be sent and received at a high baudrate (such as the currently set value of 115200), both roboclaw motor controllers need to be connected to the Jetson Nano by USB since bits cannot be sent over serial connections at such a high rate without errors occurring in the data transmission process. If you want to cable your motor controllers differently, you can connect a USB cable to one of the two motor controllers and connect the second to the first via UART (remember to adjust the first Roboclaw motor controller to be in USB-TTL relay mode in the BasicMicro Motion Studio). For that setting however, the baudrate needs to be set to a lower value such as 38400 for the messages not to turn out erroneous. Bear in mind, that then the individual motor_interface functions will require more time and therefore the node might not be able to run at the same rate anymore, which then needs to be adjusted. Also, if you want to change to this setting, you will need to adjust the node so that only one motor_interface instance with one portname is created and only the address is varied to communicate with the left and right motor controller.</li>
</ul>
<h3 id="troubleshooting">troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h3>
<p>In case you are getting errors from this package and the Roboclaw Motor Controllers are not working, go through the following quick checks:</p>
<ol>
<li>Check if the port name of both Roboclaws appear when plugin in, the USB by typing <code>ls /dev/ttyACM*</code></li>
<li>Check if you have the authority to write to this port. Otherwise type <code>chmod 666 &lt;portname&gt;</code> in order to add the authority.</li>
<li>Also, when using this node with two USB cables, it can happen that the portnames of the left and the right roboclaw motor controller swap (<code>/dev/ttyACM0</code> &lt;-&gt; <code>/dev/ttyACM1</code>). Since, to this point their USB ports are not fixed. If this happens, simply swap the two addresses for the left and the right controller specified in the param file.</li>
</ol>
<h2 id="helmoro_gazebo_plugin">helmoro_gazebo_plugin<a class="headerlink" href="#helmoro_gazebo_plugin" title="Permanent link">&para;</a></h2>
<p>This package is only used, when the argument <code>is_real_robot</code> in helmoro.launch is set to false. Package that is used to run the gazebo simulation.</p>
<h3 id="nodes_2">nodes<a class="headerlink" href="#nodes_2" title="Permanent link">&para;</a></h3>
<ul>
<li>helmoro_gazebo_plugin: Custom gazebo-plugin for the Helmoro, which simulates the wheel ground interaction.</li>
</ul>
<h3 id="worlds">worlds<a class="headerlink" href="#worlds" title="Permanent link">&para;</a></h3>
<p>Built worlds in which gazebo simulation can be started.</p>
<h2 id="helmoro_state_publisher">helmoro_state_publisher<a class="headerlink" href="#helmoro_state_publisher" title="Permanent link">&para;</a></h2>
<h3 id="nodes_3">nodes<a class="headerlink" href="#nodes_3" title="Permanent link">&para;</a></h3>
<ul>
<li>helmoro_state_publisher_node: Subscribes to <code>/helmoro_joint_states</code> and <code>/imu/data</code> coming from an imu package called <a href="#ros_imu_bno055">imu_bno055</a> (described under dependencies). The node computes the Helmoro odometry thereof and publishes it as a message of type <a href="http://docs.ros.org/melodic/api/nav_msgs/html/msg/Odometry.html">nav_msgs::Odometry</a> onto the <code>/odom</code> and onto <code>/tf</code>. It also publishes the static transforms, defined in helmoro_description/urdf and the wheel positions of Helmoro onto <code>/tf</code>.</li>
</ul>
<h2 id="helmoro_local_obstacle">helmoro_local_obstacle<a class="headerlink" href="#helmoro_local_obstacle" title="Permanent link">&para;</a></h2>
<h3 id="nodes_4">nodes<a class="headerlink" href="#nodes_4" title="Permanent link">&para;</a></h3>
<ul>
<li>helmoro_local_obstacle_node: Subscribes to the <code>/camera/depth/points</code> topic of message type <a href="http://docs.ros.org/melodic/api/sensor_msgs/html/msg/PointCloud2.html">sensor_msgs/PointCloud2</a> coming from the <a href="#ros_astra_camera">astra_camera</a> package which is described below. The node simply downsamples the incoming pointcloud using a VoxelGrid filter and publishes it as <code>/pointcloud_filtered</code>.</li>
</ul>
<h2 id="helmoro_2dnav">helmoro_2dnav<a class="headerlink" href="#helmoro_2dnav" title="Permanent link">&para;</a></h2>
<p>This package holds all the used launch and parameter files for the custom usage of the Navigation Stack with Helmoro. For more information, head to Navstack section.</p>
<h2 id="object_detector">object_detector<a class="headerlink" href="#object_detector" title="Permanent link">&para;</a></h2>
<h3 id="description">Description<a class="headerlink" href="#description" title="Permanent link">&para;</a></h3>
<p>Helmoro can detect coloured cubic objects and locate them using its RGB-D camera Once detected, the location of these objects is saved into a map, so that they can be targeted by the navigation stack. The object_detector looks for colored boxes in an image and outputs their 3D position in the map frame. (included in showcase_helmoro.launch)</p>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<p>Since the object detection algorithm used mainly checks for colours, the lighting conditions strongly influence the performance of this task.</p>
<h3 id="nodes_5">nodes<a class="headerlink" href="#nodes_5" title="Permanent link">&para;</a></h3>
<ul>
<li>object_detector: Subscribes to <code>/camera/rgb/camera_info</code> for the camera intrinsics, <code>/camera/rgb/image_raw</code> for the color image to find the objects, <code>/camera/depth/image_raw</code> for the depth information when objects in the color image were found. Publishes a custom message to <code>object_detector/object_detections</code> that contains all found objects in the current image, their color and their 3D position in the map frame. For debugging purposes, an image is published to <code>object_detector/object_detections_image</code> that indicates with black dots all the objects that were found. 
You can have a look at it using 'rqt_image_view'.
  <div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>rosrun<span class="w"> </span>rqt_image_view<span class="w"> </span>rqt_image_view
</span></code></pre></div></li>
</ul>
<h2 id="object_map">object_map<a class="headerlink" href="#object_map" title="Permanent link">&para;</a></h2>
<p>The object_map maintains a map of all detected objects. If a detection is made close to a previous detection, it fuses both measurements instead of creating a new one. The distance under which this happens is configurable in the parameter file. All objects in the map are assigned a unique identification number such that it one can easily refer to a specific object. It publishes a service, where it sends the most often seen object from a specific colour to the requester (<code>/object_map/request_object</code>) and a service with which it is possible to edit (currently only delete) a specific object (<code>/object_map/edit_map</code>).</p>
<h3 id="nodes_6">nodes<a class="headerlink" href="#nodes_6" title="Permanent link">&para;</a></h3>
<ul>
<li>object_map: Subscribes to <code>/object_detector/object_detections</code> for all current object detections. All objects are put in a map and assigned a unique id. If the object already exists, its position is updated using a filter. It publishes a service, where it sends the most often seen object from a specific colour to the requester (<code>/object_map/request_object</code>) and a service with which it is possible to edit (currently only delete) a specific object (<code>/object_map/edit_map</code>).</li>
</ul>
<h3 id="comments_1">comments<a class="headerlink" href="#comments_1" title="Permanent link">&para;</a></h3>
<ul>
<li>The object map keeps track of the certainty of an object in an absolute way, meaning it tracks how often a specific object was send by the object_detector.</li>
<li>In the current implementation, objects are never automatically removed from the map. One could think of removing objects if the Helmoro looks at an object for a long time, but does not see it.</li>
</ul>
<h2 id="helmoro_navigation_goals">helmoro_navigation_goals<a class="headerlink" href="#helmoro_navigation_goals" title="Permanent link">&para;</a></h2>
<p>This package is used for sending navigation goals to the navigation stack based on the location of the detected objects from the object map. (included in showcase_helmoro.launch)</p>
<h3 id="nodes_7">nodes<a class="headerlink" href="#nodes_7" title="Permanent link">&para;</a></h3>
<ul>
<li>helmoro_navigation_goals: Requests new objects (with their location) from the map via a rosservice <code>/object_map/request_object</code> (type <code>RequestObjectFromMap.srv</code>) and commands the robot to collect them. It does that, by going through a simple State machine and sending the computed goals to the navigation stack using _actionlib* (as described on this <a href="http://wiki.ros.org/navigation/Tutorials/SendingSimpleGoals">ROS wiki</a>).</li>
<li>The task to collect the objects after they are added to the map can be started by pushing the <code>start</code> button on the joystick controller.</li>
<li>At all times, during the object collection task the <code>back</code> button on the joystick controller can be used to cancel the collection of the objects and the following of the trajectories.</li>
<li>When Helmoro is prepared to pick up the object, this node requests the deletion of the collected object from the map with the ros service <code>/object_map/edit_map</code> (type: <code>EditObjectMap.srv</code>).</li>
<li>When Helmoro picks the object up, he changes his minimum forward speed (<code>min_vel_x</code>) to a positive value (configurable). Like this it is ensured, that Helmoro does not drive backwards or rotates in place, as this could lead to the loss of the object. He also edits his own goal acceptance tolerance to ensure no endless rotations at the global_goal by changing <code>xy_goal_tolerance</code>(configurable). When Helmoro reaches the global goal and delivered the object he then reverts both values to their original value to be able to navigate normally. (The original values is configured in the param file of the DWAPlanner).</li>
<li>Helmoro has two ways how to pick up an object. This can be specified by selection <code>target_mode</code> in the parameter file.</li>
<li>Target mode 1: Helmoro drives around the object and turns behind it. He then pushes it to the global_goal.</li>
<li>Target mode 2: Helmoro drives straight on to the object and then turns with it.</li>
</ul>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Software is shared under the BSD-3 license. <br>  CAD and mechanics design files are shared under the Creative Commons CC-BY-4.0. <br> <br> Copyright &copy; 2025 Helbling Technik Zürich 

    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://helbling.ch/en" target="_blank" rel="noopener" title="helbling.ch" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1v16.2c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2 0-3.3-.1-1.4.1-2.8.1-4.2.1L416 512h-24c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9.1-2.8v-69.7h-32c-18 0-32-14-32-32.1 0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7l255.4 224.5c8 7 12 15 11 24"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Helbling-Technik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/helbling/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>